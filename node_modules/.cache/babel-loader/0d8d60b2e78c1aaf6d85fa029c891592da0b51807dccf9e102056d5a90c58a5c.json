{"ast":null,"code":"import _slicedToArray from\"/Users/asg/codeclan_work/DisastroAlert/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import EventList from'../components/EventList';import EventDetail from'../components/EventDetail';import CategoryList from'../components/CategoryList';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EventContainer=function EventContainer(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),events=_useState2[0],setEvents=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),selectedCategory=_useState4[0],setSelectedCategory=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),selectedEvent=_useState6[0],setSelectedEvent=_useState6[1];var _useParams=useParams(),category=_useParams.category;useEffect(function(){getEvents();},[]);useEffect(function(){setSelectedCategory(category);},[]);var getEvents=function getEvents(){console.log(\"getEvents\");fetch('https://eonet.gsfc.nasa.gov/api/v3/events').then(function(res){return res.json();}).then(function(events){return setEvents(events.events);});};var handleEventSelect=function handleEventSelect(event){var eventID=event.target.value;var findEvent=events.find(function(event){return eventID===event.id;});setSelectedEvent(findEvent);};var handleCategorySelected=function handleCategorySelected(event){setSelectedCategory(event.target.textContent);};var filteredEvents=[];if(selectedCategory){filteredEvents=events.filter(function(event){return event.categories[0].title===selectedCategory;});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CategoryList,{events:events,handleCategorySelected:handleCategorySelected}),/*#__PURE__*/_jsx(EventList,{events:filteredEvents,handleEventSelect:handleEventSelect}),/*#__PURE__*/_jsx(EventDetail,{event:selectedEvent})]});};export default EventContainer;","map":{"version":3,"names":["React","useState","useEffect","useParams","EventList","EventDetail","CategoryList","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","EventContainer","_useState","_useState2","_slicedToArray","events","setEvents","_useState3","_useState4","selectedCategory","setSelectedCategory","_useState5","_useState6","selectedEvent","setSelectedEvent","_useParams","category","getEvents","console","log","fetch","then","res","json","handleEventSelect","event","eventID","target","value","findEvent","find","id","handleCategorySelected","textContent","filteredEvents","filter","categories","title","children"],"sources":["/Users/asg/codeclan_work/DisastroAlert/src/containers/EventsContainer.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {useParams} from 'react-router-dom'\nimport EventList from '../components/EventList';\nimport EventDetail from '../components/EventDetail';\nimport CategoryList from '../components/CategoryList';\n\n\nconst EventContainer = () => {\n\n    const [events, setEvents] = useState([]);\n    const [selectedCategory, setSelectedCategory] = useState(\"\");\n    const [selectedEvent, setSelectedEvent] = useState(\"\");\n    \n    const {category} = useParams()\n\n    useEffect(() => {getEvents();}, [])\n    useEffect(() => {setSelectedCategory(category);}, [])\n\n    const getEvents = function(){\n        console.log(\"getEvents\")\n    fetch('https://eonet.gsfc.nasa.gov/api/v3/events')\n    .then(res => res.json())\n    .then(events => setEvents(events.events))\n    }\n\n    const handleEventSelect = (event) => {\n        const eventID = event.target.value\n        const findEvent = events.find((event) => {\n            return eventID === event.id\n        })\n        setSelectedEvent(findEvent)\n    }\n\n    const handleCategorySelected = (event) => {\n        setSelectedCategory(event.target.textContent)\n        \n    }\n\n    let filteredEvents = []\n    if (selectedCategory) { \n        filteredEvents = events.filter((event) => {\n            return event.categories[0].title === selectedCategory\n        })\n    }\n\n    return (\n        <>\n        <CategoryList events={events} handleCategorySelected={handleCategorySelected}/>\n        <EventList events={filteredEvents} handleEventSelect={handleEventSelect}/>\n        <EventDetail event={selectedEvent}/>\n        </>\n    )\n}\n\nexport default EventContainer"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}